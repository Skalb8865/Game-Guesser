<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="../res/pokeball_logo.webp" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pokemon Guésser</title>
  <!-- Links -->
  <link rel="preload" href="./css/pokemon.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="./css/pokemon.css">
  </noscript>

  <link rel="preload" href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" as="style"
    onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css">
  </noscript>
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" as="style"
    onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  </noscript>

  <!-- JS -->
  <script type="module" src="/src/main.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
    integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://kit.fontawesome.com/c4fc73ac8f.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
    integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
    crossorigin="anonymous"></script>

  <script type="module">
    $(document).ready(function () {
      let allData = [];

      $.getJSON('/gen1_to_3_pokemon_data_with_images_and_details.json', data => {
        allData = data;
      });

      $('#search').keyup(function () {
        $('#result').html('');
        const searchField = $('#search').val().trim();
        if (!searchField) return;

        const expression = new RegExp(searchField, 'i');

        $.each(allData, (key, value) => {
          if (
            value.name.search(expression) !== -1 ||
            value.pokedex_number.toString().search(expression) !== -1 ||
            value.generation.toString().search(expression) !== -1
          ) {
            $('#result').append(`
          <li class="list-group-item" style="cursor:pointer" data-id="${value.pokedex_number}">
            <img src="${value.image}" width="40" height="40" class="img-thumbnail"/>
            ${value.name} |
            <span class="text-muted">${value.pokedex_number}</span> |
            <span class="text-muted">${value.generation}</span>
          </li>
        `);
          }
        });
      });

      $.getJSON('/gen1_to_3_pokemon_data_with_images_and_details.json', data => {
        allData = data;

        const randomPokemon = allData[Math.floor(Math.random() * allData.length)];
        if (randomPokemon) {
          $('#details').append(`
        <div class="pokemon_details">
          <div class="pokemon_cards">
            <img src="${randomPokemon.image}" alt="${randomPokemon.name}" class="img-thumbnail mb-3"/>
          </div>
          <div class="pokemon_cards"><p>${randomPokemon.name}</p></div>
          <div class="pokemon_cards"><p>${randomPokemon.generation}</p></div>
          <div class="pokemon_cards"><p>${randomPokemon.type}</p></div>
          <div class="pokemon_cards"><p>${randomPokemon.type2 || 'None'}</p></div>
        </div>
    `);
        }
      });


      // add a Pokémon card without touching previously chosen ones
      $('#result').on('click', '.list-group-item', function () {
        const pokedexId = $(this).data('id');
        setTimeout(() => {
          $('#search').val('');
          $('#result').empty();
        }, 100);

        const pokemon = allData.find(p => p.pokedex_number === pokedexId);
        if (!pokemon) return;

        $('#details').append(`
      <div class="pokemon_details">
        <div class="pokemon_cards">
          <img src="${pokemon.image}" alt="${pokemon.name}" class="img-thumbnail mb-3"/>
        </div>
        <div class="pokemon_cards"><p>${pokemon.name}</p></div>
        <div class="pokemon_cards"><p> ${pokemon.generation}</p></div>
        <div class="pokemon_cards"><p> ${pokemon.type}</p></div>
        <div class="pokemon_cards"><p>${pokemon.type2 || 'None'}</p></div>
      </div>
    `);
      });
    });
  </script>


    <!-- <script type="module">
    $(document).ready(function () {
      let allData = [];
      let secretPokemon = null;

      // 1) Load data and choose the secret Pokémon
      $.getJSON('/gen1_to_3_pokemon_data_with_images_and_details.json', data => {
        allData = data;
        secretPokemon = allData[Math.floor(Math.random() * allData.length)];
        console.log('Secret Pokémon:', secretPokemon.name);
      });

      // 2) Live search
      $('#search').keyup(function () {
        $('#result').empty();
        const term = $('#search').val().trim();
        if (!term) return;
        const regex = new RegExp(term, 'i');

        $.each(allData, (k, p) => {
          if (
            p.name.search(regex) !== -1 ||
            p.pokedex_number.toString().search(regex) !== -1 ||
            p.generation.toString().search(regex) !== -1
          ) {
            $('#result').append(`
          <li class="list-group-item" data-id="${p.pokedex_number}" style="cursor:pointer">
            <img src="${p.image}" width="40" height="40" class="img-thumbnail me-2">
            ${p.name} | <span class="text-muted">${p.pokedex_number}</span> |
            <span class="text-muted">${p.generation}</span>
          </li>
        `);
          }
        });
      });

      // 3) Handle a guess
      $('#result').on('click', '.list-group-item', function () {
        const id = $(this).data('id');
        const guess = allData.find(p => p.pokedex_number === id);
        if (!guess) return;

        // clear the search bar & dropdown
        setTimeout(() => { $('#search').val(''); $('#result').empty(); }, 50);

        // helpers
        const match = (a, b) => (a || 'None') === (b || 'None') ? 'match' : '';

        // build a “row” of tiles
        $('#details').append(`
      <div class="pokemon_details">
        <div class="pokemon_cards ${match(guess.name, secretPokemon.name)}">
          <img src="${guess.image}" class="img-thumbnail">
        </div>
        <div class="pokemon_cards ${match(guess.name, secretPokemon.name)}"><p>${guess.name}</p></div>
        <div class="pokemon_cards ${match(guess.generation, secretPokemon.generation)}"><p>${guess.generation}</p></div>
        <div class="pokemon_cards ${match(guess.type, secretPokemon.type)}"><p>${guess.type}</p></div>
        <div class="pokemon_cards ${match(guess.type2 || 'None', secretPokemon.type2 || 'None')}"><p>${guess.type2 || 'None'}</p></div>
      </div>
    `);
      });
    });
  </script> -->


  <!-- Meta Data -->
  <meta property="description" content="">
  <meta property="og:type" content="website">
  <meta property="og:title" content="">
  <meta property="og:description" content="">
  <meta property="og:image" content="">
  <meta property="og:url" content="">
  <meta name="author" content="">
  <meta property="keywords" content="">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="">
  <meta name="twitter:description" content="">
  <meta name="twitter:image" content="">
</head>

<body class="pokemon_gusser">
  <div id="preloader"></div>
  <main class="section">
    <div class="buttons_container">
      <a class="return_button" href="./index.html">← Go Back</a>
      <a class="refresh_button" href="./pokemon_guesser.html">↺ Restart</a>
    </div>
    <div class="container" style="width: 900px;">
      <div align="center">
        <input type="text" name="search" id="search" placeholder="Search Pokémon" class="form-control">
      </div>
      <ul class="list-group" id="result"></ul>
    </div>
    <div id="details" style="margin-top: 20px;"></div>
  </main>
  <footer>
    <a href="#">
      <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 48 48"
        style="background-color: white; border-radius: 50%;">
        <path
          d="M 24 4 C 12.972066 4 4 12.972074 4 24 C 4 35.027926 12.972066 44 24 44 C 35.027934 44 44 35.027926 44 24 C 44 12.972074 35.027934 4 24 4 z M 24 7 C 33.406615 7 41 14.593391 41 24 C 41 31.66536 35.956939 38.122519 29 40.251953 L 29 35.136719 C 29 33.226635 27.899316 31.588619 26.308594 30.773438 A 10 8 0 0 0 32.4375 18.720703 C 32.881044 17.355414 33.376523 14.960672 32.199219 13.076172 C 29.929345 13.076172 28.464667 14.632086 27.765625 15.599609 A 10 8 0 0 0 24 15 A 10 8 0 0 0 20.230469 15.59375 C 19.529731 14.625773 18.066226 13.076172 15.800781 13.076172 C 14.449711 15.238817 15.28492 17.564557 15.732422 18.513672 A 10 8 0 0 0 21.681641 30.779297 C 20.3755 31.452483 19.397283 32.674042 19.097656 34.15625 L 17.783203 34.15625 C 16.486203 34.15625 15.98225 33.629234 15.28125 32.740234 C 14.58925 31.851234 13.845172 31.253859 12.951172 31.005859 C 12.469172 30.954859 12.144453 31.321484 12.564453 31.646484 C 13.983453 32.612484 14.081391 34.193516 14.650391 35.228516 C 15.168391 36.160516 16.229687 37 17.429688 37 L 19 37 L 19 40.251953 C 12.043061 38.122519 7 31.66536 7 24 C 7 14.593391 14.593385 7 24 7 z">
        </path>
      </svg>
    </a>
    <p>Made By Sean Kalb</p>
  </footer>
</body>

</html>